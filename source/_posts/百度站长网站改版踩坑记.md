title: 百度站长网站改版踩坑记
author: hojun
avatar: https://cdn.jsdelivr.net/gh/honjun/ImageHosting/sina/006bYVyvgy1ftand2qurdj303c03cdfv.jpg
authorDesc: 一个好奇的人
categories: 技术
comments: true
date: 2018-08-01 23:44:31
authorLink: /about/hojun.html
authorAbout:
series:
tags:
 - seo
keywords: 网站改版
description: 这篇文章记录下使用百度搜索资源平台的网站改版功能使用过程中踩过的各种坑。
photos:
 - https://cdn.jsdelivr.net/gh/honjun/ImageHosting/sina/006bYVyvgy1ftumph1bc7j31020iijyh.jpg
---
这篇文章记录下使用百度搜索资源平台的网站改版功能使用过程中踩过的各种坑。
## 前言
博主用的是hexo+github搭建的个人博客
改版原因：

 - github不允许百度蜘蛛爬它
 - github最近是不是提交不去（怀疑被墙）

## 改版前提条件
首先有个百度账号，下边有两个认证过的域名。（博主之前有认证过，这篇文章就不介绍认证步骤）
## 网站改版
点击：百度搜索资源平台》网站支持》提交链接
![](https://cdn.jsdelivr.net/gh/honjun/ImageHosting/sina/006bYVyvgy1ftumph1bc7j31020iijyh.jpg)
滚动到底部，找到网站改版
![](https://cdn.jsdelivr.net/gh/honjun/ImageHosting/sina/006bYVyvgy1ftumphjw5bj30yj0hv0tj.jpg)
第一次随便填了下两个域名（coding和www的）
![](https://cdn.jsdelivr.net/gh/honjun/ImageHosting/sina/006bYVyvgy1ftumpfopumj30te087glq.jpg)
失败如下：
![](https://cdn.jsdelivr.net/gh/honjun/ImageHosting/sina/006bYVyvgy1ftumpew351j30r607lq30.jpg)
于是看了下改版说明：
![](https://cdn.jsdelivr.net/gh/honjun/ImageHosting/sina/006bYVyvgy1ftumpfclipj30uj063mxp.jpg)
因为是githubpages搭建的，并无服务器，于是弄了份js跳转的，注意这种跳转的http状态码还是200（死马当活马医）。
```js
<script language=javascript> 
 if (document.domain =='coding.hojun.cn')  
     this.location = "https://www.hojun.cn" + this.location.pathname + this.location.search; 
</script>
```
失败如下+1
![](https://cdn.jsdelivr.net/gh/honjun/ImageHosting/sina/006bYVyvgy1ftumpew351j30r607lq30.jpg)
错误原因：
![](https://cdn.jsdelivr.net/gh/honjun/ImageHosting/sina/006bYVyvgy1ftumpegpv7j30ml0idaba.jpg)

## 使用cloudflare添加301重定向
怎么使用Cloudflare可以参照博主的另一篇文章[]()
这里我们使用它提供的Page Rules
![](https://cdn.jsdelivr.net/gh/honjun/ImageHosting/sina/006bYVyvgy1ftumpi1sfgj30vs0g8wfm.jpg)
点击添加：
![](https://cdn.jsdelivr.net/gh/honjun/ImageHosting/sina/006bYVyvgy1ftumpig9idj30mj0ekaas.jpg)
注意一个是/*，而另一个是/$1
然后试着访问coding的域名，可以看出已经是301的方式跳转了
![](https://cdn.jsdelivr.net/gh/honjun/ImageHosting/sina/006bYVyvgy1ftumpistmsj30il08h0tu.jpg)
再次提交改版（注意要先删掉失败的）
![](https://cdn.jsdelivr.net/gh/honjun/ImageHosting/sina/006bYVyvgy1ftumpfopumj30te087glq.jpg)
恭喜成功^_^
![](https://cdn.jsdelivr.net/gh/honjun/ImageHosting/sina/006bYVyvgy1ftumpj67kjj30rt05lmx6.jpg)
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  <style type="text/css">
    body, html,#allmap {width: 100%;height: 100%;overflow: hidden;margin:0;font-family:"微软雅黑";}
  </style>
  <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=MvEW8M9eLFgXBSmuu3Y7yDoAvMQMfbas"></script>
  <title>设置地图最大、最小级别</title>
</head>
<body>
  <div id="allmap"></div>
</body>
</html>
<script type="text/javascript">
  var pointArr = [
    {
      addr: '天安门',
      lng: 116.404,
      lat: 39.915,
      img: 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=1925174106,2814133257&fm=11&gp=0.jpg',
      desc: '天安门坐落在中国北京市中心,故宫的南侧,与天安门广场隔长安街相望,是清朝皇城的大门...'
    },
    {
      addr: '天安门2',
      lng: 126.404,
      lat: 49.915,
      img: 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=1925174106,2814133257&fm=11&gp=0.jpg',
      desc: '天安门坐落在中国北京市中心,故宫的南侧,与天安门广场隔长安街相望,是清朝皇城的大门...'
    }
  ]

  // 百度地图API功能
  var map = new BMap.Map("allmap",{mapType:BMAP_NORMAL_MAP}); // 创建Map实例,设置地图允许的最小/大级别
  map.centerAndZoom(new BMap.Point(116, 39), 1);
  map.enableScrollWheelZoom(true);
  pointArr.forEach(function(point, i){
    var marker = new BMap.Marker(new BMap.Point(point.lng, point.lat));
    var sContent =`<h4 style='margin:0 0 1px 0;padding:0.1em 0'>${point.addr}</h4>
    <img style='float:right;margin:4px' id='imgDemo${i}' src='${point.img}' width='139' height='104' title='${point.addr}'/>
    <p style='width:300px;margin:0;line-height:1.5;font-size:13px;text-indent:2em'>${point.desc}</p>
    </div>`;
    var infoWindow = new BMap.InfoWindow(sContent);  // 创建信息窗口对象
    map.addOverlay(marker);
    marker.addEventListener("click", function(){          
       this.openInfoWindow(infoWindow);
       //图片加载完毕重绘infowindow
       document.getElementById('imgDemo' + i).onload = function (){
         infoWindow.redraw();   //防止在网速较慢，图片未加载时，生成的信息框高度比图片的总高度小，导致图片部分被隐藏
       }
    });
  })
</script>
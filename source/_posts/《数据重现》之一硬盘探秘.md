title: 《数据重现》之一硬盘探秘
author: hojun
avatar: /images/favicon.png
authorDesc: 一个好奇的人
categories: 技术
date: 2018-04-21 21:53:43
authorLink:
authorAbout:
tags:
 - 硬件
keywords: 硬盘
description: 硬盘探秘
photos:
 - https://wx2.sinaimg.cn/small/006bYVyvgy1fqkm5lg8vij308907uwel.jpg
---
数据恢复，就是将由于硬件损坏、误分区、误格式化、误删除、病毒破坏或其他原因导致的丢失或不可正常访问的数据恢复至正常状态的过程。
数据恢复可以分为“硬恢复”和“软恢复”两种。“硬恢复”是指由于存储介质物理上出现问题而导致的数据无法读取的恢复。“软恢复”则是指因逻辑故障 导致的数据丢失的恢复，存储介质不存在物理的故障。硬恢复需要对存储介质的结构及工作原理相当了解。软恢复则需要对数据在存储介质内的管理方式——分区及文件系统有足够的认知。
曾有业内人士将数据恢复（单指“软恢复”）分为如下3个层次。
1.软件使用层
没有存储方面的理论基础，只是利用已有的恢复软件进行恢复操作，恢复效果只能由软件来决定。
2.理论知识与软件结合层
具有深厚的理论功底，对所有要进行恢复的文件系统环境及文件结构相当的了解，熟悉恢复软件各种参数设置的理论含义，可以针对不同的数据丢失情况进行详细分析并制定切实有效的恢复方案。在纯软件操作无法很好地完成恢复工作时，能够手动修改部分参数，为软件创造一个良好的恢复环境，从而最大限度的挽救数据
3.数据恢复的“自由王国”
具备第2层次的基础，同时具有良好的编程能力，在现有的数据恢复软件无法胜任恢复要求的情况下，随时可以自行编写实用的程序，以弥补现有软件的不足，最大程度、最为快速地恢复数据。

## **硬盘探秘**
![](https://wx2.sinaimg.cn/large/006bYVyvgy1fqkm5lg8vij308907uwel.jpg)
### **硬盘结构**
硬盘基本上由控制电路板和盘体两大部分组成。

 - 控制电路板
       接口、DSP处理器、ROM、缓存、磁头驱动电路和盘片电机驱动电路
 - 盘体
       盘腔、上盖、盘片电机、盘片、磁头、音圈电机

![](https://wx3.sinaimg.cn/large/006bYVyvgy1fqkm5qpe5rj30b508omyq.jpg)
**磁道**：当硬盘旋转时，磁头若保持在一个位置上，则每个磁头都会在磁盘表面划出一个圆形轨迹，这些圆形轨迹就叫做磁道。这些磁道肉眼不可见，仅是在盘面上以特殊方式磁化了的一些磁化区。相邻磁道之间并不是紧挨着，因为磁化单元相隔太近是磁性会相互产生影响。每张盘片上的磁道由外向内依次从“0”开始进行编号。
**扇区**：磁盘上每个磁道被等分为若干个弧段，这些弧段便是磁盘的扇区。每个扇区包括存放512个字节的数据段和磁盘管理信息的信息段，磁盘驱动器在向磁盘读取和写入数据时，要以扇区为单位，扇区从“1”开始进行编号。
**柱面**：硬盘通常由重叠的一组盘片构成。前面提到，每个盘面都被划分为数目相等的磁道，并从外缘的“0”开始编号，具有相同编号的磁道形成一个圆柱，称之为磁盘的柱面。磁盘上数据的存取是沿柱面进行的，也就是在一个柱面内依次从低号盘向高号盘片写入，写满一个柱面后再转到下一个柱面。
## **硬盘性能指标**
**硬盘的转速（Spindle Speed）**:指的就是硬盘主轴电机的转动速度，一般以每分钟多少转来表示（rpm)。转动的越快，读取等待的时间就越短。但是转速的提高也带了磨损加剧、温度升高、噪声增大等一系列负面影响。
**硬盘的数据传输率（Data Transfer Rate）**:数据传输率包括外部数据传输率（External Transfer Rate,又称突发传输数率）和内部数据传输率（Internal Transfer Rate)两种。我们常常说的就是ATA100中的100就代表这块硬盘外部数据传输率的理论值是100Mb/s，也就是电脑通过数据总线从硬盘内部的缓存区中所读取数据的最高速率。
**硬盘缓存**：是硬盘与外部总线交换数据的场所。
**平均寻道时间（Average Seek Time）**:指的是从硬盘接到相应的指令开始到磁头移动到指定磁道为止所用的平均时间，单位为毫秒（ms）
**柱面切换时间（Cylinder Switch Time）**:柱面切换时间也称为道至道切换时间（Teack to Track Time），指的是两个相邻的柱面进行切换所用的时间，具体到磁道上是指磁头从当前磁道上方移动到相邻磁道上所用的时间，单位为毫秒（ms）
**平均潜伏期（Average Latency Time）**: 指的是磁头移动到指定磁道后，还需要多少时间指定的（即要读取或者写入的）扇区才会转到磁头下进行读取或者写入的相关操作。 `平均潜伏期=(60*1000)/(硬盘转速*2)`
## **寻址方式**
硬盘的寻址方式分为两种:
**C/H/S寻址方式**

 - C/H/S寻址方式是过去采用的一种寻址方式。也就是用柱面（Cylinder）/磁头（Head)/扇区（Sector)三个参数来定位一个唯一的扇区地址。

**LBA寻址方式**

 - LBA寻址方式即Login Block Address（逻辑块地址），又称为“线性寻址模式”。是将磁盘上所有的扇区依次从“0”开始进行编号，直到磁盘的最大扇区数减1
title: 都2020了，带你开发hexo主题(十一)
author: hojun
avatar: 'https://cdn.jsdelivr.net/gh/honjun/ImageHosting/picgo/20191009004718.png'
authorLink: /about/hojun.html
authorDesc: 一个好奇的人
categories: 技术
comments: true
date: 2020-02-07 15:52:44
authorAbout:
series:
tags:
keywords:
description:
photos:
---
## 完善侧边栏

上一篇教程我们已经把侧边栏成功的加入到我们的story主题中了，但是该侧边栏还是写死的数据。所以开始把它和我们的主题目录绑定起来。有用过hexo主题的朋友应该知道在config中一般有个menu配置项，用来配置博客的模板页。今天我们就来实现这一过程。
在此之前，有一样东西必须要了解一下（虽然不了解也没事）。那就是config.yml，如果说你学习过其他语言，甚至是开发过一些项目。那么你用的配置文件可能是.json\.conf\.xml\.pro\.ini。那么hexo中的.yml又是什么呢？感兴趣的可以学习另一篇文章：[yaml基本语法及实现Hexo二级导航栏功能](https://www.hojun.cn/2019/01/08/ck60ric88007st0vam6lzt2rm/)
开始撸代码之前我们要在config中添加sidebar的项：（暂定如下，图标还未考虑好）
```yml
sidebar: # 侧边栏
  首页: { path: /, fa: fa }
  归档: { path: /, fa: fa }
  关于: { path: /, fa: fa }
  项目: { path: /, fa: fa, submenus: { 
    hexo-theme-sakura: { path: /, fa: fa}, 
    hexo-theme-story: { path: /, fa: fa}, 
    hugo-theme-diaspora: { path: /, fa: fa}, 
    hugo-theme-jsimple: { path: /, fa: fa}
  } }
  友链: { path: /, fa: fa }
  FOLLOW ME: { path: /, fa: fa, submenus: { 
    qq: { path: /, fa: fa}, 
    sina: { path: /, fa: fa}, 
    github: { path: /, fa: fa },
    weichat: { path: /, fa: fa}, 
    bilibili: { path: /, fa: fa },
  } }
```
因为post-list中的代码已经够多，而且侧边栏也不算是post-list，所以我们在_partial下新建一个sidebar.ejs文件，把侧边栏代码放进去。然后修改代码如下：(为啥用for in?因为循环的是对象)
```html
<nav>
  <div class="menu-btn">
    <div class="line line__1"></div>
    <div class="line line__2"></div>
    <div class="line line__3"></div>
  </div>

  <div class="sub-menu-btn">
    <div class="line line__1"></div>
    <div class="line line__2"></div>
  </div>

  <ul class="nav-links">
    <% var sidebar = theme.sidebar %>
    <% for (item in sidebar) {%>
      <li class="link">
        <% if (!sidebar[item].submenus) {%>
          <a href="<%- url_for(sidebar[item].path) %>"><%- item %></a>
        <% } else { %>
          <a href="<%- url_for(sidebar[item].path) %>" style="pointer-events: none;"><%- item %></a>
          <ol>
            <% for (submenu in sidebar[item].submenus) {%>
              <li><a href="<%- url_for(sidebar[item].submenus[submenu].path) %>"><%- submenu %></a></li>
            <% } %>
          </ol>
        <% } %>
      </li>
    <% } %>
  </ul>
</nav>
```
就里讲下pointer-events: none
pointer-events 更像是JavaScript，它能够：

 - 阻止用户的点击动作产生任何效果
 - 阻止缺省鼠标指针的显示
 - 阻止CSS里的 hover 和 active 状态的变化触发事件
 - 阻止JavaScript点击动作触发的事件

了解更多参考[MDN:pointer-events](https://developer.mozilla.org/zh-CN/docs/Web/CSS/pointer-events)
侧边栏效果如下：
![](https://cdn.jsdelivr.net/gh/honjun/ImageHosting/picgo/20200207183721.png)

## 给侧边栏添加图标
先在header.ejs中添加fontawesome的css:
```html
<%- css(['/css/main.css', '/css/noscript.css', '/css/sidebar.css', '/css/fontawesome-all.min.css']) %>
```
接着来到fontawesome官网
![](https://cdn.jsdelivr.net/gh/honjun/ImageHosting/picgo/20200207190221.png)
点击图标，找到home的class。同理找到其他的图标。
![](https://cdn.jsdelivr.net/gh/honjun/ImageHosting/picgo/20200207190524.png)
修改config如下：（subsmenu就留给你们练手了）
```yml
sidebar: # 侧边栏
  首页: { path: /, fa: fa fa-home }
  归档: { path: /archives/, fa: fa fa-archive }
  关于: { path: /, fa: fa fa-question-circle }
  项目: { path: /, fa: fa fa-paper-plane, submenus: { 
    hexo-theme-sakura: { path: /, fa: fa}, 
    hexo-theme-story: { path: /, fa: fa}, 
    hugo-theme-diaspora: { path: /, fa: fa}, 
    hugo-theme-jsimple: { path: /, fa: fa}
  } }
  友链: { path: /, fa: fa fa-link }
  FOLLOW ME: { path: /, fa: fa fa-heart, submenus: { 
    qq: { path: /, fa: fa}, 
    sina: { path: /, fa: fa}, 
    github: { path: /, fa: fa },
    weichat: { path: /, fa: fa}, 
    bilibili: { path: /, fa: fa }
  } }
```
然后修改sidebar.ejs代码如下：(加了个i标签哦)
```yml
<% if (!sidebar[item].submenus) {%>
  <a href="<%- url_for(sidebar[item].path) %>"><i class="<%= sidebar[item].fa %>"></i><%- item %></a>
<% } else { %>
  <a href="<%- url_for(sidebar[item].path) %>" style="pointer-events: none;"><i class="<%= sidebar[item].fa %>"></i><%- item %></a>
```
最终效果如下！：
![](https://cdn.jsdelivr.net/gh/honjun/ImageHosting/picgo/20200207193411.png)

未完待续 To be continued......
代码同步上传在github仓库和百度云上，关注回复story011获取。
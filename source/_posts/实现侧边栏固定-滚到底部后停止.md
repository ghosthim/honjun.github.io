title: 实现侧边栏固定 滚到底部后停止
author: hojun
avatar: /images/favicon.png
authorDesc: 一个好奇的人
categories: 技术
date: 2017-08-09 23:55:22
authorLink:
authorAbout:
tags:
keywords:
description:
photos:
---
侧边栏固定？很简单的能想到是用position: fixed;实现。怎么实现下滑到底部footer页面停止固定效果呢。
解决方案：在到达底部的时候取消fixed固定定位换absolute绝对定位
代码
```html
<html>
<body>
	<div style="position: relative; width: 200px; height: 2000px; border:  1px solid; display: inline-block;">
		<div  class="left" style=" border:  0px solid; width: 200px; height: 600px; background: red;">
    </div>
	</div>
	<div style="width: 600px; height: 2000px; border:  1px solid; display: inline-block;">
	</div>
	<div class="footer" style="width: 100%; height: 200px; border:  1px solid;">
	</div>
</body>
<script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
<style type="text/css">
  .fixed{
    position: fixed;
    top:0px;
  }
  .abs{
    position: absolute;
    bottom:0px;
  }
</style>
<script type="text/javascript"> 
$(document).ready(function(){ 
  var loaded = true; 
  var loaded2 = true; 
  var top = $(".left").offset().top;
  var height = $(".left").outerHeight(true) + $(".footer").outerHeight(true);
  console.log(height);
  var down = $(document).height() - top - height;
  function Add_Data() 
  { 
    var scrolla=$(window).scrollTop(); 
    var cha=parseInt(top)-parseInt(scrolla); 
    var chb=parseInt(down)-parseInt(scrolla); 
    console.log(chb);
    if(loaded && cha<=0) 
    { 
      $(".left").addClass("fixed"); 
      loaded=false; 
    } 
    if(!loaded && cha>0) 
    { 
      $(".left").removeClass("fixed");
      loaded=true; 
    } 
    if(loaded2 && chb<=0) 
    { 
      $(".left").removeClass("fixed");
      $(".left").addClass("abs"); 
      loaded2=false; 
    } 
    if(!loaded2 && chb>0) 
    { 
      $(".left").removeClass("abs");
      $(".left").addClass("fixed"); 
      loaded2=true; 
    } 
  } 
  $(window).scroll(Add_Data); 
}); 
</script> 
</html>
```